### Как сдавать задания

Вы уже изучили блок «Системы управления версиями», и начиная с этого занятия все ваши работы будут приниматься ссылками на .md-файлы, размещённые в вашем публичном репозитории.

Скопируйте в свой .md-файл содержимое этого файла; исходники можно посмотреть [здесь](https://raw.githubusercontent.com/netology-code/sysadm-homeworks/devsys10/04-script-03-yaml/README.md). Заполните недостающие части документа решением задач (заменяйте `???`, ОСТАЛЬНОЕ В ШАБЛОНЕ НЕ ТРОГАЙТЕ чтобы не сломать форматирование текста, подсветку синтаксиса и прочее, иначе можно отправиться на доработку) и отправляйте на проверку. Вместо логов можно вставить скриншоты по желани.

# Домашнее задание к занятию "4.3. Языки разметки JSON и YAML"


## Обязательная задача 1
Мы выгрузили JSON, который получили через API запрос к нашему сервису:
```
    { "info" : "Sample JSON output from our service\t",
        "elements" :[
            { "name" : "first",
            "type" : "server",
            "ip" : 7175 
            }
            { "name" : "second",
            "type" : "proxy",
            "ip : 71.78.22.43
            }
        ]
    }
```
  Нужно найти и исправить все ошибки, которые допускает наш сервис

```
пропускаем json через какой-нибудь онлайн валидатор, ошибки:
1. пропущена запятая между элементами
2. пропущены кавычки в последнем айпи
однако валидатор не заметит смысловой ошибки у параметра айпи в первом элементе.
7175 явно не айпи адрес, и его тоже можно завернуть в кавычки

правильный json
    { "info" : "Sample JSON output from our service\t",
        "elements" :[
            { "name" : "first",
            "type" : "server",
            "ip" : 7175 
            },
            { "name" : "second",
            "type" : "proxy",
            "ip" : "71.78.22.43"
            }
        ]
    }

```

## Обязательная задача 2
В прошлый рабочий день мы создавали скрипт, позволяющий опрашивать веб-сервисы и получать их IP. К уже реализованному функционалу нам нужно добавить возможность записи JSON и YAML файлов, описывающих наши сервисы. Формат записи JSON по одному сервису: `{ "имя сервиса" : "его IP"}`. Формат записи YAML по одному сервису: `- имя сервиса: его IP`. Если в момент исполнения скрипта меняется IP у сервиса - он должен так же поменяться в yml и json файле.

### Ваш скрипт:
```python
#!/usr/bin/env python3

# добавляем поддержку сокетов и работы со временем для таймаутов
import socket
import time

# добавляем поддержку json и yaml
import json
import yaml

# формируем начальный список хостов и адресов через dict массив
host_ip_list = {
    'drive.google.com':'192.168.2.2',
    'mail.google.com':'192.168.2.3',
    'google.com':'192.168.2.4'
}

# бесконечный цикл проверки
while True:
    # цикл по каждому хосту из массива
    for host in host_ip_list:
        # определяем текущий реальный айпи адрес хоста командой gethostbyname
        ip = socket.gethostbyname(host)
        # проверяем, совпадает ли текущий адрес хоста с адресом из массива
        if ip != host_ip_list[host]:
            # при несовпадении выводим ошибку, а также адрес из массива и текущий адрес
            print('ERROR: '+host+' IP mismatch: '+host_ip_list[host]+' - '+ip)
            # перезаписываем в массив текущий адрес хоста
            host_ip_list[host] = ip
        else:
            # при совпадении выводим адрес хоста из массива
            print(host+' - '+host_ip_list[host])
        # таймаут для удобства отображения вывода
        time.sleep(2)

    # делаем дамп dict массив в формате json
    json_file = json.dumps(host_ip_list, indent=4)

    # пишем дамп в json файл
    with open("host_ip_list.json", "w") as outfile:
        outfile.write(json_file)

    # пишем массив в yaml файл
    with open("host_ip_list.yaml", 'w') as outfile:
        yaml.dump(host_ip_list, outfile)
```

### Вывод скрипта при запуске при тестировании:
```
PS C:\Users\user\PycharmProjects\devops-netology\homework\04-script-03-yaml> C:/Users/user/PycharmProjects/devops-net
ology/homework/04-script-03-yaml/host_ip_json_and_yaml_export.py
ERROR: drive.google.com IP mismatch: 192.168.2.2 - 173.194.222.194
ERROR: mail.google.com IP mismatch: 192.168.2.3 - 108.177.14.17
ERROR: google.com IP mismatch: 192.168.2.4 - 142.251.1.113
drive.google.com - 173.194.222.194
mail.google.com - 108.177.14.17
google.com - 142.251.1.113
drive.google.com - 173.194.222.194
mail.google.com - 108.177.14.17
google.com - 142.251.1.113
drive.google.com - 173.194.222.194
и т.д. 
```

### json-файл(ы), который(е) записал ваш скрипт:
```json
{
    "drive.google.com": "173.194.222.194",
    "mail.google.com": "108.177.14.17",
    "google.com": "142.251.1.113"
}
```

### yml-файл(ы), который(е) записал ваш скрипт:
```yaml
drive.google.com: 173.194.222.194
google.com: 142.251.1.113
mail.google.com: 108.177.14.17
```

## Дополнительное задание (со звездочкой*) - необязательно к выполнению

Так как команды в нашей компании никак не могут прийти к единому мнению о том, какой формат разметки данных использовать: JSON или YAML, нам нужно реализовать парсер из одного формата в другой. Он должен уметь:
   * Принимать на вход имя файла
   * Проверять формат исходного файла. Если файл не json или yml - скрипт должен остановить свою работу
   * Распознавать какой формат данных в файле. Считается, что файлы *.json и *.yml могут быть перепутаны
   * Перекодировать данные из исходного формата во второй доступный (из JSON в YAML, из YAML в JSON)
   * При обнаружении ошибки в исходном файле - указать в стандартном выводе строку с ошибкой синтаксиса и её номер
   * Полученный файл должен иметь имя исходного файла, разница в наименовании обеспечивается разницей расширения файлов

### Ваш скрипт:
```python
???
```

### Пример работы скрипта:
???